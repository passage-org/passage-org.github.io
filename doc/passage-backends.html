<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2025-05-27 Tue 16:01 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Passage's Homepage</title>
<meta name="author" content="chat-wane" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" type="text/css" href="/css/font.css" />
<link rel="stylesheet" type="text/css" href="/css/root.css" />
<link rel="stylesheet" type="text/css" href="/css/homepage.css" />
<link rel="stylesheet" type="text/css" href="/css/code.css" />
</head>
<body>
<div id="preamble" class="status">
<div class="header-bar">
  <ul class='navigation-bar'>
    <li><a class="logo" href="/"><img src="/res/passage.svg" title="passage" width="40px"/></a></li>
    <li><a class="header_button underlined" href="https://passage-org.github.io/passage-comunica/" title="try passage x comunica">Try it!</a></li>

    <li style="float:right">
      <span class="github">
        <a href="https://github.com/passage-org" title="GitHub of passage-org">
          <!-- comes from : https://github.com/logos -->
          <svg class="logo_github" viewBox="0 0 98 96" width="30" height="30" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"/></svg>
        </a>
      </span>
    </li>
    
    <li style="float:right">
      <input id="dark-light-toggle" name="dark-light-toggle" style="display:none" type="checkbox" />
      <a href="#" onclick="document.getElementById('dark-light-toggle').checked = !document.getElementById('dark-light-toggle').checked" class="about" title="Toggle dark/light mode">
        <!-- comes from https://www.svgrepo.com/svg/362877/moon-bold licensed MIT, from phosphor-->
        <svg class="logo_about" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg" width="36" height="36">
          <g><path d="M228.13086,149.11719A12.00407,12.00407,0,0,0,213.168,141.165,80.03157,80.03157,0,0,1,114.85742,42.75,12.00191,12.00191,0,0,0,99.939,27.833,104.01378,104.01378,0,1,0,228.18555,155.99512,12.00185,12.00185,0,0,0,228.13086,149.11719ZM128,208A80.01075,80.01075,0,0,1,88.14551,58.61719a103.98165,103.98165,0,0,0,109.2373,109.2373A80.31015,80.31015,0,0,1,128,208Z"></path></g>
        </svg>
      </a>
    </li>
    
  </ul>
</div>
</div>
<div id="content" class="content">
<h1 class="title">Passage's Homepage</h1>
<h1>Backends: Storing RDF Data, creating Knowledge Graphs.</h1>

<p>
With Passage, we want to provide end-users with correct and
complete results without having to modify the already stored
data. This becomes crucial when the dataset comprises billions of
triples/quads that could take days to ingest.
</p>

<p>
The same Passage Java engine supports any backend, granted the
latter implements our provided interfaces.
</p>

<div id="outline-container-org368a46b" class="outline-2">
<h2 id="org368a46b">Blazegraph</h2>
<div class="outline-text-2" id="text-org368a46b">
<p>
With our first release, we focused on <a href="https://blazegraph.com/">Blazegraph</a>
[<a href="#citeproc_bib_item_2">2</a>]. Despite its terminated support, it presents a
unique feature that we can take advantage of, to pause and continue
query executions:
</p>

<p>
It uses an <b>augmented</b> balanced tree for each index, i.e., a counter
is associated with each tree node that allows Passage to
efficiently skip large parts of triple/quad patterns. Simple SPARQL
queries like the following are efficiently computed:
</p>
<div class="right-comment" id="orgd898810">
<p>
The time complexity to create range query iterators is logarithmic
compared to the number of elements matching the pattern.
</p>

</div>

<div class="org-src-container">
<pre class="src src-sparql"><span class="org-keyword">SELECT</span> * <span class="org-keyword">WHERE</span> {         <span class="org-comment"># A SELECT query or sub-query</span>
  <span class="org-keyword">BIND</span> (rdf:type <span class="org-keyword">AS</span> <span class="org-variable-name">?p</span>)  <span class="org-comment"># Var(s) assignment(s)</span>
  <span class="org-variable-name">?s</span> <span class="org-variable-name">?p</span> <span class="org-variable-name">?o</span>               <span class="org-comment"># One triple/quad pattern only</span>
} <span class="org-keyword">OFFSET</span> 10000000        <span class="org-comment"># May need to skip a lot of elements</span>
</pre>
</div>
<div class="left-comment" id="orge18eb62">
<p>
Which is equivalent to a single triple pattern whose predicate
is bounded: <code>?s rdf:type ?o</code>. This example shows that simple <code>BIND</code>
are handled.
</p>

</div>

<p>
It is important since Passage extensively produces such simple
subqueries as basis for more complex continuation queries
[<a href="#citeproc_bib_item_1">1</a>].
</p>
</div>
</div>


<div id="outline-container-contributing" class="outline-2">
<h2 id="contributing">Contributing</h2>
<div class="outline-text-2" id="text-contributing">
<p>
To improve adoption, one major aspect of continuation queries concerns
the support for databases such as <a href="https://jena.apache.org/">Apache Jena</a>, <a href="https://rdf4j.org/">RDF4J</a>, or <a href="https://www.rdfhdt.org/">HDT</a>.
</p>
</div>

<div id="outline-container-orgee2148e" class="outline-4">
<h4 id="orgee2148e">Adding Support</h4>
<div class="outline-text-4" id="text-orgee2148e">
<p>
Our aim is to support many databases with minimal effort, without
modifying the data. To that end, one must implement the interface
<a href="https://github.com/passage-org/passage/blob/main/passage-commons/src/main/java/fr/gdd/passage/commons/interfaces/Backend.java"><code>Backend</code></a>. This interface requires three templates <code>&lt;ID, VALUE, SKIP&gt;</code>
since most data structures rely on identifiers <code>&lt;ID&gt;</code> for storing the
triples/quads but on their own <code>&lt;VALUE&gt;</code> to store their actual value
(often in a separated dictionary).
</p>

<p>
Then, backends must provide a range query search that instantiate an
iterator:
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-type">BackendIterator</span>&lt;<span class="org-type">ID</span>, <span class="org-type">VALUE</span>, <span class="org-type">SKIP</span>&gt; <span class="org-function-name">search</span>(<span class="org-keyword">final</span> <span class="org-type">ID</span> <span class="org-variable-name">s</span>, <span class="org-keyword">final</span> <span class="org-type">ID</span> <span class="org-variable-name">p</span>, <span class="org-keyword">final</span> <span class="org-type">ID</span> <span class="org-variable-name">o</span>);
</pre>
</div>

<p>
Among other, the iterators should provide a skipping mechanism to
efficiently compute the simple <code>OFFSET</code> subqueries:
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-type">void</span> <span class="org-function-name">skip</span>(<span class="org-keyword">final</span> <span class="org-type">SKIP</span> <span class="org-variable-name">to</span>);
</pre>
</div>
<div class="right-comment" id="org31f5caf">
<p>
Although highly recommended, implementing a logarithmic <code>skip</code> is not
mandatory if the call to <code>skip</code> is fast enough: One should only make
sure that the query as enough time to progress over pause/resume cycles.
</p>

</div>

<p>
 <br/> 
</p>
</div>
</div>

<div id="outline-container-orga9514b2" class="outline-4">
<h4 id="orga9514b2">Testing</h4>
<div class="outline-text-4" id="text-orga9514b2">
<p>
As per usual, the code should be tested. The requirements are not huge
though. We mostly need backends to output values that they will be
able to use as input later on.
</p>
</div>
</div>
</div>

<div id="outline-container-org093ffe3" class="outline-2">
<h2 id="org093ffe3">References</h2>
<div class="outline-text-2" id="text-org093ffe3">
<style>.csl-left-margin{float: left; padding-right: 0em;}
 .csl-right-inline{margin: 0 0 0 1em;}</style><div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Pham THT, Montoya G, Nédelec B, Skaf-Molli H, Molli P (2025) <a href="https://doi.org/10.1145/3696410.3714757">Passage: Ensuring completeness and responsiveness of public sparql endpoints with sparql continuation queries</a></div>
  </div>
  <div class="csl-entry"><a id="citeproc_bib_item_2"></a>
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Systap (2013) <a href="https://blazegraph.com/docs/bigdata_architecture_whitepaper.pdf">The bigdata rdf database</a></div>
  </div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="text-center">
  Ⓒ 2017–2025
  <a href="https://sites.google.com/site/gddlina/">GDD Team</a>,
  <a href="https://www.ls2n.fr?lang=en">LS2N</a>,
  <a href="http://www.univ-nantes.fr/">University of Nantes</a>
</p>
</div>
</body>
</html>
